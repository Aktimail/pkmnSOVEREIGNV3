import{N as e,t as s,_ as t,g as o,n as i,T as l,s as a,u as d,e as n}from"./shell-a9dcd804.js";import{a as r,s as c,x as h,c as u,I as p}from"./icon-d7ad820f.js";import{Q as m}from"./age-gate-standalone-client-js-55e13342.js";import{M as b,a as C,b as g}from"./mod-notes-60d3e71a.js";const y=e(c);let M=class extends y{constructor(){super(...arguments),this.isModNotesRailClientSourceLoaded=!1,this.isPDP=!1,this.isModRecruitingPage=!1,this.openModNoteRail=async e=>{const s=document.getElementById(b);try{const t=this.querySelector(`faceplate-partial[name="${C}"]`),o=this.querySelector(`shreddit-async-loader[name="${C}"]`);if(!t||!o)return;this.classList.remove("hidden"),t.classList.add("hidden"),s?.classList.remove("hidden");let i=g;for(const s in e){const t=e[s];i=i.replace(`/:${s}`,t?`/${t}`:"")}t.src=i;const l=document.querySelector(".right-sidebar");this.isModRecruitingPage&&l&&l.classList.add("s:block"),this.isModNotesRailClientSourceLoaded?await t.load():(await Promise.allSettled([o.load(),t.load()]),this.isModNotesRailClientSourceLoaded=!0),s?.classList.add("hidden"),t.classList.remove("hidden")}catch(e){}this.onScrollHandlerThrottled()},this.onScrollHandler=()=>{const e=this.getBoundingClientRect();this.style.height=`calc(100vh - ${e.top}px - ${this.isPDP?"16px":"0"}16px - 1px)`},this.onScrollHandlerThrottled=m(this.onScrollHandler,200,!0),this.handleCloseClick=()=>{this.classList.add("hidden"),this.publish(l.ModNotesRailClose);const e=document.querySelector(".right-sidebar");this.isModRecruitingPage&&e&&e.classList.remove("s:block")}}connectedCallback(){super.connectedCallback(),this.subscribe(l.ModNotesRailOpen,this.openModNoteRail,!1),this.subscribe(l.ModNotesRailForceClose,this.handleCloseClick,!1),document.addEventListener("scroll",this.onScrollHandlerThrottled)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(l.ModNotesRailOpen,this.openModNoteRail),this.unsubscribe(l.ModNotesRailForceClose,this.handleCloseClick),document.removeEventListener("scroll",this.onScrollHandlerThrottled)}handleCloseKeyboardEnter(e){"Enter"===e.key&&this.handleCloseClick()}render(){return h` <slot></slot> <div class="absolute top-md right-md z-10" @click="${this.handleCloseClick}" @keyup="${this.handleCloseKeyboardEnter}"> ${a({leadingIcon:u({size:p.Small}),size:d.Small,attributes:{className:"opacity-80 button-media"}})} </div> `}};M.styles=[s,r`:host{display:block}`],t([o()],M.prototype,"isModNotesRailClientSourceLoaded",void 0),t([i({type:Boolean,attribute:"is-pdp"})],M.prototype,"isPDP",void 0),t([i({type:Boolean,attribute:"mod-recruiting-page"})],M.prototype,"isModRecruitingPage",void 0),M=t([n("mod-notes-rail-closer")],M);
